(()=>{var b=(t,i)=>{t.forEach(e=>P(e,i))},P=(t,i)=>{let e=Math.min(t.tilePosition[0].x,t.tilePosition[1].x),n=Math.min(t.tilePosition[0].y,t.tilePosition[1].y),o=Math.max(t.tilePosition[0].x,t.tilePosition[1].x),s=Math.max(t.tilePosition[0].y,t.tilePosition[1].y),l={x:e*50,y:n*50},d={x:o*50+50,y:s*50+50};i.strokeStyle="black",i.lineWidth=2,i.beginPath(),i.roundRect(l.x,l.y,d.x-l.x,d.y-l.y,10),i.fillStyle="rgba(0, 0, 0, 0.34)",i.fill(),i.stroke()};var r=class{constructor(i,e){this.x=i;this.y=e}isEqual(i){return this.x===i.x&&this.y===i.y}},c=class{constructor(i){this.tilePosition=i}overlaps(i){return i.tilePosition.some(e=>this.tilePosition.some(n=>n.isEqual(e)))}},h=class t{constructor(i,e,n){this.width=i;this.height=e;this.tiles=n}occupiedPositions(){return this.tiles.flatMap(i=>i.tilePosition)}isInBounds(i){return i.x>=0&&i.x<this.width&&i.y>=0&&i.y<this.height}isFreePosition(i){return this.isInBounds(i)&&!this.occupiedPositions().some(e=>e.isEqual(i))}freePositions(){let i=[];for(let e=0;e<this.width;e++)for(let n=0;n<this.height;n++){let o=new r(e,n);this.isFreePosition(o)&&i.push(o)}return i}isComplete(){return this.occupiedPositions().length===this.width*this.height}generateChildren(){let i=this.freePositions();if(i.length===0)return[];let e=null,n=[];for(let o of i){let s=[new r(o.x-1,o.y),new r(o.x+1,o.y),new r(o.x,o.y-1),new r(o.x,o.y+1)].filter(l=>this.isFreePosition(l));(e===null||s.length<n.length)&&(e=o,n=s)}return n.map(o=>{let s=new c([e,o]);return new t(this.width,this.height,[...this.tiles,s])})}},a=class{constructor(i,e,n=[],o=!1,s=!0){this.parent=i;this.tiling=e;this.children=n;this.visited=o;this.viable=s}},g=()=>{let i=new a(null,new h(20,20,[]));for(;!i.tiling.isComplete();){if(!i.viable&&(i=i.parent,!i))throw new Error("No complete tiling found");i.visited||(i.children=i.tiling.generateChildren().map(n=>new a(i,n)),i.visited=!0);let e=i.children.filter(n=>n.viable);if(e.length===0){i.viable=!1;continue}i=e[Math.floor(Math.random()*e.length)]}return i.tiling.tiles};var p=document.getElementById("generate-button"),u=document.querySelector("canvas"),m=u.getContext("2d"),y=()=>{m.clearRect(0,0,u.width,u.height);let t=g();b(t,m)};p.addEventListener("click",y);y();})();
//# sourceMappingURL=index.js.map
